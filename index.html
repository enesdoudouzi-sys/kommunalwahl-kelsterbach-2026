<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Kommunalwahl Kelsterbach – Stimmungsbild</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f6f8fb;
  --card:#ffffff;
  --primary:#0f172a;
  --muted:#475569;
  --accent:#2563eb; /* modern neutral blue */
  --accent-soft:#e0e7ff;
  --border:#e2e8f0;
}

*{box-sizing:border-box;}

body {
  font-family: Inter, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  max-width: 980px;
  margin: 2.5rem auto;
  padding: 0 1.25rem;
  background: var(--bg);
  color: var(--primary);
}

h1 {
  font-size: 2rem;
  margin-bottom: .5rem;
}

h2 {
  font-size: 1.3rem;
  margin-bottom: .5rem;
}

h3 {
  font-size: 1.05rem;
  margin-top: 1rem;
}

section {
  background: var(--card);
  padding: 1.75rem 1.75rem 1.9rem;
  border-radius: 20px;
  margin-bottom: 2rem;
  border: 1px solid var(--border);
  box-shadow: 0 18px 45px rgba(15,23,42,.08);
}

.small {
  font-size: .85rem;
  color: var(--muted);
}

form label {
  display: flex;
  align-items: center;
  gap: .75rem;
  padding: .65rem .75rem;
  border-radius: 12px;
  cursor: pointer;
  transition: background .15s ease, transform .05s ease;
}

form label:hover {
  background: var(--accent-soft);
}

form label:active {
  transform: scale(.99);
}

form label:hover {
  background: #f1f5f9;
}

input[type="radio"]{
  accent-color: var(--accent);
}

button {
  margin-top: 1.25rem;
  padding: .75rem 1.75rem;
  font-size: 1rem;
  font-weight: 600;
  border: none;
  border-radius: 999px;
  background: linear-gradient(135deg,var(--accent),#1d4ed8);
  color: white;
  cursor: pointer;
  box-shadow: 0 10px 25px rgba(37,99,235,.35);
}

button:hover{
  filter: brightness(1.05);
}

button:hover{
  background:#2563eb;
}

.result {
  margin-bottom: 1.1rem;
  padding: .6rem .75rem;
  border-radius: 14px;
  background:#f8fafc;
}

.bar {
  height: 16px;
  border-radius: 999px;
  background: linear-gradient(90deg, var(--accent), #60a5fa);
  margin-top: .35rem;
  box-shadow: inset 0 1px 2px rgba(255,255,255,.6);
}

ul {
  padding-left: 1.1rem;
}

ul li{
  margin-bottom: .25rem;
}
</style>
</head>

<body>

<!-- HERO HEADER -->
<!-- HERO HEADER -->
<header style="background:linear-gradient(135deg,#0f172a,#1e293b);color:#fff;border-radius:18px;padding:1.75rem 1.5rem;margin-bottom:2.25rem;box-shadow:0 20px 40px rgba(15,23,42,.35)">
  <div style="max-width:820px;margin:0 auto;text-align:center">
    <h1 style="margin:0;font-size:2.1rem;font-weight:700;letter-spacing:-.01em">Kommunalwahl Kelsterbach</h1>
    <p style="margin:.75rem 0 0;font-size:.95rem;opacity:.9;line-height:1.5">
      Neutrales, nicht repräsentatives Stimmungsbild zur nächsten Kommunalwahl<br>
      Bürgerbeteiligung · anonym · freiwillig · ohne Wahlempfehlung
    </p>
  </div>
</header>

<section>
<h2>Frage</h2>
<p><strong>
Wenn bei der nächsten Kommunalwahl in Kelsterbach gewählt würde – wen würden Sie wählen?
</strong></p>

<form id="voteForm">
  <label><input type="radio" name="vote" value="CDU"> CDU</label>
  <label><input type="radio" name="vote" value="SPD"> SPD</label>
  <label><input type="radio" name="vote" value="FDP"> FDP</label>
  <label><input type="radio" name="vote" value="Die Linke"> Die Linke</label>
  <label><input type="radio" name="vote" value="EUK"> EUK</label>
  <label><input type="radio" name="vote" value="Freie Wähler"> Freie Wähler</label>
  <label><input type="radio" name="vote" value="WIK + FNK"> WIK + FNK</label>
  <label><input type="radio" name="vote" value="HAK"> HAK</label>
  <label><input type="radio" name="vote" value="Unentschlossen"> Unentschlossen / nehme nicht teil</label>

  <button type="submit">Stimme abgeben</button>
</form>
</section>

<section>
<h2>Aktuelles Stimmungsbild</h2>
<div id="results"></div>
</section>

<section>
<h2>Zusatzfragen zu kommunalen Themen</h2>
<p class="small">Freiwillig · anonym · dient der Einordnung von Themen, keine Wahlempfehlung.</p>
<form id="themesForm">
  <label><input type="checkbox" name="theme" value="Wohnraum"> Bezahlbarer Wohnraum</label>
  <label><input type="checkbox" name="theme" value="Verkehr"> Verkehrsberuhigung</label>
  <label><input type="checkbox" name="theme" value="Radwege"> Ausbau von Radwegen</label>
  <label><input type="checkbox" name="theme" value="ÖPNV"> Öffentlicher Personennahverkehr</label>
  <label><input type="checkbox" name="theme" value="Stadtgrün"> Stadtgrün & Baumpflanzungen</label>
  <label><input type="checkbox" name="theme" value="Senioren"> Pflege & Senioren</label>
  <label><input type="checkbox" name="theme" value="Integration"> Integration & Geflüchtete</label>
  <label><input type="checkbox" name="theme" value="Vereine"> Vereine & Ehrenamt</label>
  <label><input type="checkbox" name="theme" value="Bürgernähe"> Bürgernähe & Beteiligung</label>

  <button type="submit">Themen speichern</button>
</form>
<div id="themeResults" class="small" style="margin-top:1rem"></div>
</section>



<section>
<h2>Hinweis zur Einordnung</h2>
<p class="small">
Diese Seite bildet ein freiwilliges, nicht repräsentatives Stimmungsbild ab.
Unentschlossene und Nichtteilnahme sind gleichwertige Optionen und werden nicht bewertet.
</p>
</section>

<script>
const parteien = [
  "CDU","SPD","FDP","Die Linke","EUK",
  "Freie Wähler","WIK + FNK","HAK","Unentschlossen"
];

const key = "kelsterbach_votes";

// Initialisieren
if (!localStorage.getItem(key)) {
  const init = {};
  parteien.forEach(p => init[p] = 0);
  localStorage.setItem(key, JSON.stringify(init));
}

document.getElementById("voteForm").onsubmit = e => {
  e.preventDefault();
  const choice = document.querySelector('input[name="vote"]:checked');
  if (!choice) return;

  const data = JSON.parse(localStorage.getItem(key));
  data[choice.value]++;
  localStorage.setItem(key, JSON.stringify(data));

  anzeigen();
  e.target.reset();
};

function anzeigen() {
  const data = JSON.parse(localStorage.getItem(key));
  const total = Object.values(data).reduce((a,b)=>a+b,0);
  const div = document.getElementById("results");
  div.innerHTML = "";

  parteien.forEach(p => {
    const v = data[p];
    const percent = total ? (v/total*100).toFixed(1) : 0;
    div.innerHTML += `
      <div class="result">
        <strong>${p}: ${percent}% (${v})</strong>
        <div class="bar" style="width:${percent}%"></div>
      </div>`;
  });

  div.innerHTML += `<p class="small">Gesamtstimmen: ${total}</p>`;
}

anzeigen();

// ---- Themenauswertung ----
const themeKey = "kelsterbach_themes";
if (!localStorage.getItem(themeKey)) localStorage.setItem(themeKey, JSON.stringify({}));

document.getElementById("themesForm").onsubmit = e => {
  e.preventDefault();
  const data = JSON.parse(localStorage.getItem(themeKey));
  document.querySelectorAll('input[name="theme"]:checked').forEach(cb => {
    data[cb.value] = (data[cb.value] || 0) + 1;
  });
  localStorage.setItem(themeKey, JSON.stringify(data));
  e.target.reset();
  showThemes();
};

function showThemes(){
  const data = JSON.parse(localStorage.getItem(themeKey));
  const div = document.getElementById("themeResults");
  if (!Object.keys(data).length) {
    div.innerText = "Noch keine Themeneinträge.";
    return;
  }
  div.innerHTML = "<strong>Genannte Themen (Häufigkeit):</strong><ul>" +
    Object.entries(data)
      .sort((a,b)=>b[1]-a[1])
      .map(([k,v])=>`<li>${k}: ${v}</li>`).join("") +
    "</ul>";
}
showThemes();
</script>

</body>
</html>
